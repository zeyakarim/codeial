{let t=function(){$("#new-post-form").submit((function(t){t.preventDefault();let o=$("#new-post-form")[0],a=new FormData(o);$.ajax({url:"/posts/create",method:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(t){console.log(t),$("#new-post-form .inputfield").val("");let o=e(t.data.post);$("#posts-list-controller>ul").prepend(o),s($(" .delete-post-button",o)),n($(".menu-button",o)),new ToggleLike($(".toggle-like-button",o)),new Noty({theme:"relax",text:"Post is Published",type:"success",layout:"topRight",timeout:"1500"}).show()},error:function(t){console.log(t.responseText)}})}))},e=function(t){return $(`<li class="post-container" id="post-${t._id}" style="margin: 10px 0px; padding: 0px;">\n                    <div style="padding:5px 18px;">\n                        <div style="display: flex; justify-content: space-between;">\n                            <div class="dlt-btn-cntnr" style ="display: flex;">\n                                <div>\n                                    ${t.user.avatar?`<img src="${t.user.avatar}" alt="${t.user.name}" width="40"></img>`:'<img src="https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png" alt="codeial-default-logo" width="40">'}\n                                </div>\n\n                                <div>\n                                    <h4 style='margin: 13px 8px 0px;'>${t.user.name}</h4>\n                                    <small>${timeAgo(t.createdAt)} <span></span> <i class="fa-solid fa-globe"></i></small>\n                                </div>\n                            </div>\n\n                            <div class='add-menu'>\n                                <div class="menu" id="${t._id}" style="display: none;">\n                                    <ul>\n                                        <li>\n                                            <a class="delete-post-button" href="/posts/destroy/${t._id}">Delete</a>\n                                        </li>\n                                    </ul>\n                                </div>\n                \n                                <div class="menu-button" id="${t._id}" data-toggles="false">\n                                    <i class="fa-solid fa-ellipsis-h"></i>\n                                </div>\n                            </div>\n                        </div>\n\n                        <p>${t.content}</p>\n                    </div>\n                    \n                    ${t.postAvatar?`<p style="width: 100%; margin: 0;">\n                            <img src="${t.postAvatar}" alt="${t.name}" width="100%">\n                        </p>`:""}\n                   \n                    <div class="like-box">\n                        <div class="like-comment-box" id="${t._id}">\n                            ${t.likes.length?`<p>\n                                    ${t.likes.length} Likes\n                                </p>`:""}\n                        </div>\n\n                        <div class="border-lk-cmt">\n                            \n                            <a class="toggle-like-button" data-likes="${t.likes.length}" href="/likes/toggle/?id=${t._id}&type=Post">\n                                <p>\n                                    <i class="fa-solid fa-thumbs-up"></i>\n                                </p>\n                                <p style="margin-left: 0;">\n                                    Likes\n                                </p>\n                            </a>\n                            \n                            <p class="comment-btn" id="${t._id}" data-toggles="false">\n                                <i class="fa-solid fa-comment"></i>\n                            </p> \n                        </div>     \n                    </div>\n\n                    <div class="post-comments">\n                        <div style="display: flex;">\n                            <div class="img-container">\n                                <img src="${t.user.avatar}" alt="${t.user.name}" width="30">\n                            </div>\n                            <div class="comments-form">\n                                <form action="/comments/create" method="POST" id="post-${t._id}-comments-form">\n                                    <input type="text" name="content" placeholder="Type here to add comment..." required>\n                                    <input type="hidden" name="post" value="${t._id}">\n                                    <input type="submit" value="Comment">\n                                </form> \n                            </div>\n                        </div>\n                \n                        <div class="post-comments-list">\n                            <ul id="post-comments-${t._id}">\n                \n                            </ul>\n                \n                        </div>\n                    </div> \n\n                </li>`)},n=function(t){$(t).click((function(t){let e=$(t.currentTarget).attr("id"),n=$(t.currentTarget).attr("data-toggles"),s=$(".menu");for(let o of s){e==$(o).attr("id")&&("false"==n?($(o).css("display","block"),$(t.currentTarget).attr("data-toggles",!0)):($(o).css("display","none"),$(t.currentTarget).attr("data-toggles",!1)))}}))},s=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){console.log(t),$(`#post-${t.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post and associated comments deleted",type:"success",layout:"topRight",timeout:"1500"}).show()},error:function(t){console.log(t.responseText)}})}))};timeAgo=function(t){console.log(t);var e=(new Date).getTime()-new Date(t).getTime(),n=Math.floor(e/1e3),s=Math.floor(n/60),o=Math.floor(s/60),a=Math.floor(o/24),i=Math.floor(a/30),l=Math.floor(i/12);return 0===e?"Just now":n<60?n+"s":s<60?s+"m":o<24?o+"h":a<30?a+"d":i<12?i+"m":l+"y"};let o=$(".delete-post-button");for(let t of o)s(t);let a=$(".menu-button");for(let t of a)n(t);t()}